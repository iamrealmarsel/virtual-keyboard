(()=>{"use strict";var e=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild};function t(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const s=function(){function s(t,n){var i=t.keyCode,o=t.values;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.keyCode=i,this.values=o,this.element=e(function(e,t,s){return'<div class="key '.concat(e.toLowerCase(),'" data-code=').concat(e,">").concat(t[s].key,"</div>")}(this.keyCode,this.values,n))}var n,i;return n=s,(i=[{key:"getElement",value:function(){return this.element}},{key:"addActiveClass",value:function(){this.element.classList.add("_active")}},{key:"removeActiveClass",value:function(){this.element.classList.remove("_active")}},{key:"showShiftValues",value:function(e){"Tab"!==this.keyCode&&"Enter"!==this.keyCode&&(this.element.textContent=this.values[e].shiftKey)}},{key:"hideShiftValues",value:function(e){"Tab"!==this.keyCode&&"Enter"!==this.keyCode&&(this.element.textContent=this.values[e].key)}},{key:"showCapsValues",value:function(e){("en"!==e||"BracketLeft"!==this.keyCode&&"BracketRight"!==this.keyCode&&"Quote"!==this.keyCode&&"Semicolon"!==this.keyCode&&"Backslash"!==this.keyCode&&"Comma"!==this.keyCode&&"Period"!==this.keyCode)&&(this.element.textContent=this.values[e].shiftKey)}},{key:"hideCapsValues",value:function(e){("en"!==e||"BracketLeft"!==this.keyCode&&"BracketRight"!==this.keyCode&&"Quote"!==this.keyCode&&"Semicolon"!==this.keyCode&&"Backslash"!==this.keyCode&&"Comma"!==this.keyCode&&"Period"!==this.keyCode)&&(this.element.textContent=this.values[e].key)}},{key:"toggleLang",value:function(e,t){if("Tab"!==this.keyCode&&"Enter"!==this.keyCode){var s=t;"capsLock"===t&&(s=this.values[e].capsLock?"capsLock":"key"),this.element.textContent=this.values[e][s]}}}])&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),s}();function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function a(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return y(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function h(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const c=function(){function t(e,s){var n=e.symbolKeys,o=e.digitKeys,r=e.metaKeys,y=e.letterKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=s,this.keyComponents={symbolKeys:this.generateKeyComponents(n),digitKeys:this.generateKeyComponents(o),metaKeys:this.generateKeyComponents(r),letterKeys:this.generateKeyComponents(y)},this.keyArrComponents=[].concat(a(Object.values(this.keyComponents.letterKeys)),a(Object.values(this.keyComponents.digitKeys)),a(Object.values(this.keyComponents.symbolKeys)),a(Object.values(this.keyComponents.metaKeys).filter((function(e){return"CapsLock"!==e.keyCode})))),this.keyComponentsByCode=i(i(i(i({},this.keyComponents.symbolKeys),this.keyComponents.digitKeys),this.keyComponents.metaKeys),this.keyComponents.letterKeys),this.shiftDependentKeyComponents=[].concat(a(Object.values(this.keyComponents.letterKeys)),a(Object.values(this.keyComponents.digitKeys)),a(Object.values(this.keyComponents.symbolKeys))),this.capsLockDependentKeyComponents=a(Object.values(this.keyComponents.letterKeys)),this.element=this.generateElement()}var n,o;return n=t,(o=[{key:"generateElement",value:function(){var t=e('<div class="keyboard"></div>'),s=e('<div class="keyboard__keys"></div>'),n=e('<div class="keyboard__keys"></div>'),i=e('<div class="keyboard__keys"></div>'),o=e('<div class="keyboard__keys"></div>'),r=e('<div class="keyboard__keys"></div>'),y=e('<div class="keyboard__keys keyboard__keys_wrap"></div>'),h=e('<div class="keyboard__keys keyboard__keys_col"></div>'),c=e('<div class="keyboard__keys keyboard__keys_col"></div>'),l=this.keyComponents,k=l.symbolKeys,f=l.metaKeys,u=l.digitKeys,p=l.letterKeys,m=k.Backquote,d=k.Minus,K=k.Equal,g=k.Tab,b=k.IntlBackslash,v=k.Slash,C=k.Space,L=k.Enter,S=f.Backspace,w=f.CapsLock,O=f.ShiftLeft,E=f.ShiftRight,j=f.Delete,A=f.ControlLeft,D=f.AltLeft,P=f.MetaLeft,x=f.MetaRight,_=f.AltRight,B=f.ArrowLeft,R=f.ArrowUp,T=f.ArrowDown,M=f.ArrowRight,I=Object.values(u).map((function(e){return e.element})),V=Object.values(p).map((function(e){return e.element})),H=e('<div class="keyboard__arrowKeys"></div>');H.append(R.element,T.element);var U=[m.element].concat(a(I),[d.element,K.element,S.element]),Q=[g.element].concat(a(V.slice(0,12))),q=[w.element].concat(a(V.slice(12,24))),J=[O.element,b.element].concat(a(V.slice(24,33)),[v.element,E.element]),N=[j.element,A.element,D.element,P.element,C.element,x.element,_.element,B.element,H,M.element];return s.append.apply(s,a(U)),n.append.apply(n,a(Q)),i.append.apply(i,a(q)),o.append.apply(o,a(J)),r.append.apply(r,N),h.append(n,i),c.append(L.element),y.append(h,c),t.append(s,y,o,r),t}},{key:"generateKeyComponents",value:function(e){var t=this,n=Object.entries(e),i={};return n.forEach((function(e){var n={},o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,i,o=[],a=!0,r=!1;try{for(s=s.call(e);!(a=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return o}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);n.keyCode=o[0],n.values=o[1],i[n.keyCode]=new s(n,t.state.lang)})),i}},{key:"setState",value:function(e){this.state=e}},{key:"toggleActiveClass",value:function(e,t){if("all"===e)return this.keyArrComponents.forEach((function(e){return e.removeActiveClass()})),void console.log(111);var s="CapsLock"===e?this.state.capslock:t;console.log(222),s?this.keyComponentsByCode[e].addActiveClass():this.keyComponentsByCode[e].removeActiveClass()}},{key:"toggleCapsLock",value:function(){var e=this;this.state.capslock?this.capsLockDependentKeyComponents.forEach((function(t){t.showCapsValues(e.state.lang)})):this.capsLockDependentKeyComponents.forEach((function(t){t.hideCapsValues(e.state.lang)}))}},{key:"toggleShift",value:function(){var e=this;this.state.leftShift||this.state.rightShift?this.shiftDependentKeyComponents.forEach((function(t){t.showShiftValues(e.state.lang)})):this.state.capslock?(this.shiftDependentKeyComponents.forEach((function(t){t.hideShiftValues(e.state.lang)})),this.capsLockDependentKeyComponents.forEach((function(t){t.showCapsValues(e.state.lang)}))):this.shiftDependentKeyComponents.forEach((function(t){t.hideShiftValues(e.state.lang)}))}},{key:"toggleLang",value:function(){var e,t=this;e=this.state.leftShift||this.state.rightShift?"shiftKey":this.state.capslock?"capsLock":"key",this.shiftDependentKeyComponents.forEach((function(s){s.toggleLang(t.state.lang,e)}))}}])&&h(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function u(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const p=function(){function t(e){var s=e.symbolKeys,n=e.digitKeys,i=e.letterKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.keys=k(k(k({},s),n),i),this.element=this.generateElement(),this.text=this.element.value,this.selectMode=!1}var s,n;return s=t,(n=[{key:"generateElement",value:function(){return e('<textarea class="output"></textarea>')}},{key:"setState",value:function(e){this.state=e}},{key:"update",value:function(e){if("Delete"===e||"Backspace"===e)this.remove(e);else if("ArrowLeft"===e||"ArrowRight"===e||"ArrowUp"===e||"ArrowDown"===e)this.navigate(e);else{if(!this.keys[e])return;this.add(e)}}},{key:"navigate",value:function(e){this.element.selectionStart===this.element.selectionEnd?"ArrowLeft"===e&&0!==this.element.selectionStart?(this.element.selectionStart-=1,this.element.selectionEnd=this.element.selectionStart):"ArrowRight"===e&&this.element.selectionStart<this.element.textLength?(this.element.selectionStart+=1,this.element.selectionEnd=this.element.selectionStart):"ArrowUp"===e?(this.element.selectionStart=0,this.element.selectionEnd=0):"ArrowDown"===e&&(this.element.selectionStart=this.element.textLength,this.element.selectionEnd=this.element.textLength):"ArrowLeft"===e?this.element.selectionEnd=this.element.selectionStart:"ArrowRight"===e?this.element.selectionStart=this.element.selectionEnd:"ArrowUp"===e?(this.element.selectionStart=0,this.element.selectionEnd=0):"ArrowDown"===e&&(this.element.selectionStart=this.element.textLength,this.element.selectionEnd=this.element.textLength)}},{key:"add",value:function(e){var t;if(t="Enter"===e||"Tab"===e?"value":this.state.leftShift||this.state.rightShift?"shiftKey":this.state.capslock&&this.keys[e][this.state.lang].capsLock?"capsLock":"key",this.element.selectionStart===this.element.selectionEnd){this.text=this.text.slice(0,this.element.selectionStart)+this.keys[e][this.state.lang][t]+this.text.slice(this.element.selectionStart);var s=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=s+1}else{var n=this.element.selectionStart;this.element.setRangeText(this.keys[e][this.state.lang][t]),this.text=this.element.value,this.element.selectionStart=n+1,this.element.selectionEnd=this.element.selectionStart}}},{key:"remove",value:function(e){if(this.element.selectionStart===this.element.selectionEnd){if("Backspace"===e&&0!==this.element.selectionStart){this.text=this.text.slice(0,this.element.selectionStart-1)+this.text.slice(this.element.selectionStart);var t=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=t-1}else if("Delete"===e){this.text=this.text.slice(0,this.element.selectionStart)+this.text.slice(this.element.selectionStart+1);var s=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=s}}else this.element.setRangeText(""),this.text=this.element.value}}])&&u(s.prototype,n),Object.defineProperty(s,"prototype",{writable:!1}),t}(),m=JSON.parse('{"symbolKeys":{"Backquote":{"en":{"key":"§","shiftKey":"±"},"ru":{"key":">","shiftKey":"<"}},"Minus":{"en":{"key":"-","shiftKey":"_"},"ru":{"key":"-","shiftKey":"_"}},"Equal":{"en":{"key":"=","shiftKey":"+"},"ru":{"key":"=","shiftKey":"+"}},"IntlBackslash":{"en":{"key":"`","shiftKey":"~"},"ru":{"key":"]","shiftKey":"["}},"Slash":{"en":{"key":"/","shiftKey":"?"},"ru":{"key":"/","shiftKey":"?"}},"Space":{"en":{"key":" ","shiftKey":" "},"ru":{"key":" ","shiftKey":" "}},"Tab":{"en":{"key":"&#8677;","shiftKey":"&#8677;","value":"\\t"},"ru":{"key":"&#8677;","shiftKey":"&#8677;","value":"\\t"}},"Enter":{"en":{"key":"&#11152;","shiftKey":"&#11152;","value":"\\n"},"ru":{"key":"&#11152;","shiftKey":"&#11152;","value":"\\n"}}},"digitKeys":{"Digit1":{"en":{"key":"1","shiftKey":"!"},"ru":{"key":"1","shiftKey":"!"}},"Digit2":{"en":{"key":"2","shiftKey":"@"},"ru":{"key":"2","shiftKey":"\\""}},"Digit3":{"en":{"key":"3","shiftKey":"#"},"ru":{"key":"3","shiftKey":"№"}},"Digit4":{"en":{"key":"4","shiftKey":"$"},"ru":{"key":"4","shiftKey":"%"}},"Digit5":{"en":{"key":"5","shiftKey":"%"},"ru":{"key":"5","shiftKey":":"}},"Digit6":{"en":{"key":"6","shiftKey":"^"},"ru":{"key":"6","shiftKey":","}},"Digit7":{"en":{"key":"7","shiftKey":"&"},"ru":{"key":"7","shiftKey":"."}},"Digit8":{"en":{"key":"8","shiftKey":"*"},"ru":{"key":"8","shiftKey":";"}},"Digit9":{"en":{"key":"9","shiftKey":"("},"ru":{"key":"9","shiftKey":"("}},"Digit0":{"en":{"key":"0","shiftKey":")"},"ru":{"key":"0","shiftKey":")"}}},"metaKeys":{"Backspace":{"en":{"key":"&#9003;","shiftKey":"&#9003;"},"ru":{"key":"&#9003;","shiftKey":"&#9003;"}},"CapsLock":{"en":{"key":"&#8682;","shiftKey":"&#8682;"},"ru":{"key":"&#8682;","shiftKey":"&#8682;"}},"ShiftLeft":{"en":{"key":"&#8679;","shiftKey":"&#8679;"},"ru":{"key":"&#8679;","shiftKey":"&#8679;"}},"ShiftRight":{"en":{"key":"&#8679;","shiftKey":"&#8679;"},"ru":{"key":"&#8679;","shiftKey":"&#8679;"}},"Delete":{"en":{"key":"&#8998;","shiftKey":"&#8998;"},"ru":{"key":"&#8998;","shiftKey":"&#8998;"}},"ControlLeft":{"en":{"key":"&#8963;","shiftKey":"&#8963;"},"ru":{"key":"&#8963;","shiftKey":"&#8963;"}},"AltLeft":{"en":{"key":"&#8997;","shiftKey":"&#8997;"},"ru":{"key":"&#8997;","shiftKey":"&#8997;"}},"MetaLeft":{"en":{"key":"&#8984;","shiftKey":"&#8984;"},"ru":{"key":"&#8984;","shiftKey":"&#8984;"}},"MetaRight":{"en":{"key":"&#8984;","shiftKey":"&#8984;"},"ru":{"key":"&#8984;","shiftKey":"&#8984;"}},"AltRight":{"en":{"key":"&#8997;","shiftKey":"&#8997;"},"ru":{"key":"&#8997;","shiftKey":"&#8997;"}},"ArrowLeft":{"en":{"key":"&#9668;","shiftKey":"&#9668;"},"ru":{"key":"&#9668;","shiftKey":"&#9668;"}},"ArrowUp":{"en":{"key":"&#9650;","shiftKey":"&#9650;"},"ru":{"key":"&#9650;","shiftKey":"&#9650;"}},"ArrowDown":{"en":{"key":"&#9660;","shiftKey":"&#9660;"},"ru":{"key":"&#9660;","shiftKey":"&#9660;"}},"ArrowRight":{"en":{"key":"&#9658;","shiftKey":"&#9658;"},"ru":{"key":"&#9658;","shiftKey":"&#9658;"}}},"letterKeys":{"KeyQ":{"en":{"key":"q","shiftKey":"Q","capsLock":"Q"},"ru":{"key":"й","shiftKey":"Й","capsLock":"Й"}},"KeyW":{"en":{"key":"w","shiftKey":"W","capsLock":"W"},"ru":{"key":"ц","shiftKey":"Ц","capsLock":"Ц"}},"KeyE":{"en":{"key":"e","shiftKey":"E","capsLock":"E"},"ru":{"key":"у","shiftKey":"У","capsLock":"У"}},"KeyR":{"en":{"key":"r","shiftKey":"R","capsLock":"R"},"ru":{"key":"к","shiftKey":"К","capsLock":"К"}},"KeyT":{"en":{"key":"t","shiftKey":"T","capsLock":"T"},"ru":{"key":"е","shiftKey":"Е","capsLock":"Е"}},"KeyY":{"en":{"key":"y","shiftKey":"Y","capsLock":"Y"},"ru":{"key":"н","shiftKey":"Н","capsLock":"Н"}},"KeyU":{"en":{"key":"u","shiftKey":"U","capsLock":"U"},"ru":{"key":"г","shiftKey":"Г","capsLock":"Г"}},"KeyI":{"en":{"key":"i","shiftKey":"I","capsLock":"I"},"ru":{"key":"ш","shiftKey":"Ш","capsLock":"Ш"}},"KeyO":{"en":{"key":"o","shiftKey":"O","capsLock":"O"},"ru":{"key":"щ","shiftKey":"Щ","capsLock":"Щ"}},"KeyP":{"en":{"key":"p","shiftKey":"P","capsLock":"P"},"ru":{"key":"з","shiftKey":"З","capsLock":"З"}},"BracketLeft":{"en":{"key":"[","shiftKey":"{"},"ru":{"key":"х","shiftKey":"Х","capsLock":"Х"}},"BracketRight":{"en":{"key":"]","shiftKey":"}"},"ru":{"key":"ъ","shiftKey":"Ъ","capsLock":"Ъ"}},"KeyA":{"en":{"key":"a","shiftKey":"A","capsLock":"A"},"ru":{"key":"ф","shiftKey":"Ф","capsLock":"Ф"}},"KeyS":{"en":{"key":"s","shiftKey":"S","capsLock":"S"},"ru":{"key":"ы","shiftKey":"Ы","capsLock":"Ы"}},"KeyD":{"en":{"key":"d","shiftKey":"D","capsLock":"D"},"ru":{"key":"в","shiftKey":"В","capsLock":"В"}},"KeyF":{"en":{"key":"f","shiftKey":"F","capsLock":"F"},"ru":{"key":"а","shiftKey":"А","capsLock":"А"}},"KeyG":{"en":{"key":"g","shiftKey":"G","capsLock":"G"},"ru":{"key":"п","shiftKey":"П","capsLock":"П"}},"KeyH":{"en":{"key":"h","shiftKey":"H","capsLock":"H"},"ru":{"key":"р","shiftKey":"Р","capsLock":"Р"}},"KeyJ":{"en":{"key":"j","shiftKey":"J","capsLock":"J"},"ru":{"key":"о","shiftKey":"О","capsLock":"О"}},"KeyK":{"en":{"key":"k","shiftKey":"K","capsLock":"K"},"ru":{"key":"л","shiftKey":"Л","capsLock":"Л"}},"KeyL":{"en":{"key":"l","shiftKey":"L","capsLock":"L"},"ru":{"key":"д","shiftKey":"Д","capsLock":"Д"}},"Semicolon":{"en":{"key":";","shiftKey":":"},"ru":{"key":"ж","shiftKey":"Ж","capsLock":"Ж"}},"Quote":{"en":{"key":"\'","shiftKey":"\\""},"ru":{"key":"э","shiftKey":"Э","capsLock":"Э"}},"Backslash":{"en":{"key":"\\\\","shiftKey":"|"},"ru":{"key":"ё","shiftKey":"Ё","capsLock":"Ё"}},"KeyZ":{"en":{"key":"z","shiftKey":"Z","capsLock":"Z"},"ru":{"key":"я","shiftKey":"Я","capsLock":"Я"}},"KeyX":{"en":{"key":"x","shiftKey":"X","capsLock":"X"},"ru":{"key":"ч","shiftKey":"Ч","capsLock":"Ч"}},"KeyC":{"en":{"key":"c","shiftKey":"C","capsLock":"C"},"ru":{"key":"с","shiftKey":"С","capsLock":"С"}},"KeyV":{"en":{"key":"v","shiftKey":"V","capsLock":"V"},"ru":{"key":"м","shiftKey":"М","capsLock":"М"}},"KeyB":{"en":{"key":"b","shiftKey":"B","capsLock":"B"},"ru":{"key":"и","shiftKey":"И","capsLock":"И"}},"KeyN":{"en":{"key":"n","shiftKey":"N","capsLock":"N"},"ru":{"key":"т","shiftKey":"Т","capsLock":"Т"}},"KeyM":{"en":{"key":"m","shiftKey":"M","capsLock":"M"},"ru":{"key":"ь","shiftKey":"Ь","capsLock":"Ь"}},"Comma":{"en":{"key":",","shiftKey":"<"},"ru":{"key":"б","shiftKey":"Б","capsLock":"Б"}},"Period":{"en":{"key":".","shiftKey":">"},"ru":{"key":"ю","shiftKey":"Ю","capsLock":"Ю"}}}}');function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function K(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function b(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={capslock:!1,leftShift:!1,rightShift:!1,lang:localStorage.getItem("lang")?localStorage.getItem("lang"):"en"},this.mainElement=document.createElement("main"),e.append(this.mainElement),this.keyboardComponent=new c(m,this.state),this.outputComponent=new p(m),this.keyByCode=K(K(K(K({},m.symbolKeys),m.digitKeys),m.letterKeys),m.metaKeys),this.keyboardElement=this.keyboardComponent.element,this.mouseTarget=null}var s,n;return s=t,(n=[{key:"init",value:function(){document.addEventListener("keydown",this.keydownHandler.bind(this)),document.addEventListener("keyup",this.keyupHandler.bind(this)),this.keyboardElement.addEventListener("mousedown",this.mousedownHandler.bind(this)),this.keyboardElement.addEventListener("mouseup",this.mouseupHandler.bind(this)),this.mainElement.append(this.outputComponent.element),this.mainElement.append(this.keyboardComponent.element),this.mainElement.append(e('<div class="info">\n  <p>Клавиатура создана и протестирована в операционной системе macOs.</p>\n  <p>Для переключения языка используйте комбинацию клавиш:<br> control + option (ctrl + alt на windows).</p>\n  </div>'))}},{key:"mousedownHandler",value:function(e){e.preventDefault();var t=e.target.dataset.code;this.keyByCode[t]&&(this.mouseTarget=t,"CapsLock"===t?(this.state.capslock=!this.state.capslock,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleCapsLock()):"ShiftLeft"===t?(this.state.leftShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t&&(this.state.rightShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()),this.outputComponent.setState(this.state),this.outputComponent.update(t),this.keyboardComponent.toggleActiveClass(t,!0))}},{key:"mouseupHandler",value:function(e){e.preventDefault(),"ShiftLeft"===this.mouseTarget?this.state.leftShift=!1:"ShiftRight"===this.mouseTarget&&(this.state.rightShift=!1),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift(),this.keyboardComponent.toggleActiveClass("all",!1)}},{key:"keydownHandler",value:function(e){e.preventDefault();var t=e.code;this.keyByCode[t]&&("CapsLock"===t?(this.state.capslock=e.getModifierState("CapsLock"),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleCapsLock()):"ShiftLeft"===t?(this.state.leftShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t?(this.state.rightShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):e.ctrlKey&&e.altKey&&(this.state.lang="en"===this.state.lang?"ru":"en",localStorage.setItem("lang",this.state.lang),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleLang()),this.outputComponent.setState(this.state),this.outputComponent.update(t),this.keyboardComponent.toggleActiveClass(t,!0))}},{key:"keyupHandler",value:function(e){e.preventDefault();var t=e.code;this.keyByCode[t]&&("CapsLock"===t?(this.state.capslock=e.getModifierState("CapsLock"),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleCapsLock()):"ShiftLeft"===t?(this.state.leftShift=!1,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t&&(this.state.rightShift=!1,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()),this.keyboardComponent.toggleActiveClass(t,!1))}}])&&b(s.prototype,n),Object.defineProperty(s,"prototype",{writable:!1}),t}())(document.body).init()})();
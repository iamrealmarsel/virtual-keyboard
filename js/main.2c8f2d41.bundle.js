(()=>{"use strict";var e=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild};function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}const n=function(){function n(t,s){var i=t.keyCode,o=t.values;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.keyCode=i,this.values=o,this.element=e(function(e,t,n){return'<div class="key '.concat(e.toLowerCase(),'" data-code=').concat(e,">").concat(t[n].key,"</div>")}(this.keyCode,this.values,s))}var s,i;return s=n,(i=[{key:"getElement",value:function(){return this.element}},{key:"addActiveClass",value:function(){this.element.classList.add("_active")}},{key:"removeActiveClass",value:function(){this.element.classList.remove("_active")}},{key:"showShiftValues",value:function(e){"Tab"!==this.keyCode&&"Enter"!==this.keyCode&&(this.element.textContent=this.values[e].shiftKey)}},{key:"hideShiftValues",value:function(e){"Tab"!==this.keyCode&&"Enter"!==this.keyCode&&(this.element.textContent=this.values[e].key)}},{key:"showCapsValues",value:function(e){("en"!==e||"BracketLeft"!==this.keyCode&&"BracketRight"!==this.keyCode&&"Quote"!==this.keyCode&&"Semicolon"!==this.keyCode&&"Backslash"!==this.keyCode&&"Comma"!==this.keyCode&&"Period"!==this.keyCode)&&(this.element.textContent=this.values[e].shiftKey)}},{key:"hideCapsValues",value:function(e){("en"!==e||"BracketLeft"!==this.keyCode&&"BracketRight"!==this.keyCode&&"Quote"!==this.keyCode&&"Semicolon"!==this.keyCode&&"Backslash"!==this.keyCode&&"Comma"!==this.keyCode&&"Period"!==this.keyCode)&&(this.element.textContent=this.values[e].key)}},{key:"toggleLang",value:function(e,t){if("Tab"!==this.keyCode&&"Enter"!==this.keyCode){var n=t;"capsLock"===t&&(n=this.values[e].capsLock?"capsLock":"key"),this.element.textContent=this.values[e][n]}}}])&&t(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),n}();function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function l(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}const h=function(){function t(e,n){var s=e.symbolKeys,o=e.digitKeys,r=e.metaKeys,y=e.letterKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=n,this.keyComponents={symbolKeys:this.generateKeyComponents(s),digitKeys:this.generateKeyComponents(o),metaKeys:this.generateKeyComponents(r),letterKeys:this.generateKeyComponents(y)},this.keyArrComponents=[].concat(a(Object.values(this.keyComponents.letterKeys)),a(Object.values(this.keyComponents.digitKeys)),a(Object.values(this.keyComponents.symbolKeys)),a(Object.values(this.keyComponents.metaKeys).filter((function(e){return"CapsLock"!==e.keyCode})))),this.keyComponentsByCode=i(i(i(i({},this.keyComponents.symbolKeys),this.keyComponents.digitKeys),this.keyComponents.metaKeys),this.keyComponents.letterKeys),this.shiftDependentKeyComponents=[].concat(a(Object.values(this.keyComponents.letterKeys)),a(Object.values(this.keyComponents.digitKeys)),a(Object.values(this.keyComponents.symbolKeys))),this.capsLockDependentKeyComponents=a(Object.values(this.keyComponents.letterKeys)),this.element=this.generateElement()}var s,o;return s=t,(o=[{key:"generateElement",value:function(){var t=e('<div class="keyboard"></div>'),n=e('<div class="keyboard__keys"></div>'),s=e('<div class="keyboard__keys"></div>'),i=e('<div class="keyboard__keys"></div>'),o=e('<div class="keyboard__keys"></div>'),r=e('<div class="keyboard__keys"></div>'),y=e('<div class="keyboard__keys keyboard__keys_wrap"></div>'),l=e('<div class="keyboard__keys keyboard__keys_col"></div>'),h=e('<div class="keyboard__keys keyboard__keys_col"></div>'),c=this.keyComponents,f=c.symbolKeys,k=c.metaKeys,u=c.digitKeys,p=c.letterKeys,m=f.Backquote,d=f.Minus,K=f.Equal,g=f.Tab,v=f.IntlBackslash,b=f.Slash,C=f.Space,L=f.Enter,S=k.Backspace,w=k.CapsLock,E=k.ShiftLeft,O=k.ShiftRight,j=k.Delete,_=k.ControlLeft,A=k.AltLeft,D=k.MetaLeft,P=k.MetaRight,x=k.AltRight,B=k.ArrowLeft,R=k.ArrowUp,T=k.ArrowDown,I=k.ArrowRight,H=Object.values(u).map((function(e){return e.element})),M=Object.values(p).map((function(e){return e.element})),V=e('<div class="keyboard__arrowKeys"></div>');V.append(R.element,T.element);var U=[m.element].concat(a(H),[d.element,K.element,S.element]),q=[g.element].concat(a(M.slice(0,12))),Q=[w.element].concat(a(M.slice(12,24))),J=[E.element,v.element].concat(a(M.slice(24,33)),[b.element,O.element]),N=[j.element,_.element,A.element,D.element,C.element,P.element,x.element,B.element,V,I.element];return n.append.apply(n,a(U)),s.append.apply(s,a(q)),i.append.apply(i,a(Q)),o.append.apply(o,a(J)),r.append.apply(r,N),l.append(s,i),h.append(L.element),y.append(l,h),t.append(n,y,o,r),t}},{key:"generateKeyComponents",value:function(e){var t=this,s=Object.entries(e),i={};return s.forEach((function(e){var s={},o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,o=[],a=!0,r=!1;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(o.push(s.value),!t||o.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(r)throw i}}return o}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);s.keyCode=o[0],s.values=o[1],i[s.keyCode]=new n(s,t.state.lang)})),i}},{key:"setState",value:function(e){this.state=e}},{key:"toggleActiveClass",value:function(e,t){"all"!==e?("CapsLock"===e?this.state.capslock:t)?this.keyComponentsByCode[e].addActiveClass():this.keyComponentsByCode[e].removeActiveClass():this.keyArrComponents.forEach((function(e){return e.removeActiveClass()}))}},{key:"toggleCapsLock",value:function(){var e=this;this.state.capslock?this.capsLockDependentKeyComponents.forEach((function(t){t.showCapsValues(e.state.lang)})):this.capsLockDependentKeyComponents.forEach((function(t){t.hideCapsValues(e.state.lang)}))}},{key:"toggleShift",value:function(){var e=this;this.state.leftShift||this.state.rightShift?this.shiftDependentKeyComponents.forEach((function(t){t.showShiftValues(e.state.lang)})):this.state.capslock?(this.shiftDependentKeyComponents.forEach((function(t){t.hideShiftValues(e.state.lang)})),this.capsLockDependentKeyComponents.forEach((function(t){t.showCapsValues(e.state.lang)}))):this.shiftDependentKeyComponents.forEach((function(t){t.hideShiftValues(e.state.lang)}))}},{key:"toggleLang",value:function(){var e,t=this;e=this.state.leftShift||this.state.rightShift?"shiftKey":this.state.capslock?"capsLock":"key",this.shiftDependentKeyComponents.forEach((function(n){n.toggleLang(t.state.lang,e)}))}}])&&l(s.prototype,o),Object.defineProperty(s,"prototype",{writable:!1}),t}();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}const p=function(){function t(e){var n=e.symbolKeys,s=e.digitKeys,i=e.letterKeys;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.keys=f(f(f({},n),s),i),this.element=this.generateElement(),this.text=this.element.value,this.selectMode=!1}var n,s;return n=t,(s=[{key:"generateElement",value:function(){return e('<textarea class="output__field"></textarea>')}},{key:"setState",value:function(e){this.state=e}},{key:"update",value:function(e){if("Delete"===e||"Backspace"===e)this.remove(e);else if("ArrowLeft"===e||"ArrowRight"===e||"ArrowUp"===e||"ArrowDown"===e)this.navigate(e);else{if(!this.keys[e])return;this.add(e)}}},{key:"navigate",value:function(e){this.element.selectionStart===this.element.selectionEnd?"ArrowLeft"===e&&0!==this.element.selectionStart?(this.element.selectionStart-=1,this.element.selectionEnd=this.element.selectionStart):"ArrowRight"===e&&this.element.selectionStart<this.element.textLength?(this.element.selectionStart+=1,this.element.selectionEnd=this.element.selectionStart):"ArrowUp"===e?(this.element.selectionStart=0,this.element.selectionEnd=0):"ArrowDown"===e&&(this.element.selectionStart=this.element.textLength,this.element.selectionEnd=this.element.textLength):"ArrowLeft"===e?this.element.selectionEnd=this.element.selectionStart:"ArrowRight"===e?this.element.selectionStart=this.element.selectionEnd:"ArrowUp"===e?(this.element.selectionStart=0,this.element.selectionEnd=0):"ArrowDown"===e&&(this.element.selectionStart=this.element.textLength,this.element.selectionEnd=this.element.textLength)}},{key:"add",value:function(e){var t;if(t="Enter"===e||"Tab"===e?"value":this.state.leftShift||this.state.rightShift?"shiftKey":this.state.capslock&&this.keys[e][this.state.lang].capsLock?"capsLock":"key",this.element.selectionStart===this.element.selectionEnd){this.text=this.text.slice(0,this.element.selectionStart)+this.keys[e][this.state.lang][t]+this.text.slice(this.element.selectionStart);var n=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=n+1}else{var s=this.element.selectionStart;this.element.setRangeText(this.keys[e][this.state.lang][t]),this.text=this.element.value,this.element.selectionStart=s+1,this.element.selectionEnd=this.element.selectionStart}}},{key:"remove",value:function(e){if(this.element.selectionStart===this.element.selectionEnd){if("Backspace"===e&&0!==this.element.selectionStart){this.text=this.text.slice(0,this.element.selectionStart-1)+this.text.slice(this.element.selectionStart);var t=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=t-1}else if("Delete"===e){this.text=this.text.slice(0,this.element.selectionStart)+this.text.slice(this.element.selectionStart+1);var n=this.element.selectionStart;this.element.value=this.text,this.element.selectionEnd=n}}else this.element.setRangeText(""),this.text=this.element.value}}])&&u(n.prototype,s),Object.defineProperty(n,"prototype",{writable:!1}),t}(),m=JSON.parse('{"symbolKeys":{"Backquote":{"en":{"key":"§","shiftKey":"±"},"ru":{"key":">","shiftKey":"<"}},"Minus":{"en":{"key":"-","shiftKey":"_"},"ru":{"key":"-","shiftKey":"_"}},"Equal":{"en":{"key":"=","shiftKey":"+"},"ru":{"key":"=","shiftKey":"+"}},"IntlBackslash":{"en":{"key":"`","shiftKey":"~"},"ru":{"key":"]","shiftKey":"["}},"Slash":{"en":{"key":"/","shiftKey":"?"},"ru":{"key":"/","shiftKey":"?"}},"Space":{"en":{"key":" ","shiftKey":" "},"ru":{"key":" ","shiftKey":" "}},"Tab":{"en":{"key":"&#8677;","shiftKey":"&#8677;","value":"\\t"},"ru":{"key":"&#8677;","shiftKey":"&#8677;","value":"\\t"}},"Enter":{"en":{"key":"&#11152;","shiftKey":"&#11152;","value":"\\n"},"ru":{"key":"&#11152;","shiftKey":"&#11152;","value":"\\n"}}},"digitKeys":{"Digit1":{"en":{"key":"1","shiftKey":"!"},"ru":{"key":"1","shiftKey":"!"}},"Digit2":{"en":{"key":"2","shiftKey":"@"},"ru":{"key":"2","shiftKey":"\\""}},"Digit3":{"en":{"key":"3","shiftKey":"#"},"ru":{"key":"3","shiftKey":"№"}},"Digit4":{"en":{"key":"4","shiftKey":"$"},"ru":{"key":"4","shiftKey":"%"}},"Digit5":{"en":{"key":"5","shiftKey":"%"},"ru":{"key":"5","shiftKey":":"}},"Digit6":{"en":{"key":"6","shiftKey":"^"},"ru":{"key":"6","shiftKey":","}},"Digit7":{"en":{"key":"7","shiftKey":"&"},"ru":{"key":"7","shiftKey":"."}},"Digit8":{"en":{"key":"8","shiftKey":"*"},"ru":{"key":"8","shiftKey":";"}},"Digit9":{"en":{"key":"9","shiftKey":"("},"ru":{"key":"9","shiftKey":"("}},"Digit0":{"en":{"key":"0","shiftKey":")"},"ru":{"key":"0","shiftKey":")"}}},"metaKeys":{"Backspace":{"en":{"key":"&#9003;","shiftKey":"&#9003;"},"ru":{"key":"&#9003;","shiftKey":"&#9003;"}},"CapsLock":{"en":{"key":"&#8682;","shiftKey":"&#8682;"},"ru":{"key":"&#8682;","shiftKey":"&#8682;"}},"ShiftLeft":{"en":{"key":"&#8679;","shiftKey":"&#8679;"},"ru":{"key":"&#8679;","shiftKey":"&#8679;"}},"ShiftRight":{"en":{"key":"&#8679;","shiftKey":"&#8679;"},"ru":{"key":"&#8679;","shiftKey":"&#8679;"}},"Delete":{"en":{"key":"&#8998;","shiftKey":"&#8998;"},"ru":{"key":"&#8998;","shiftKey":"&#8998;"}},"ControlLeft":{"en":{"key":"&#8963;","shiftKey":"&#8963;"},"ru":{"key":"&#8963;","shiftKey":"&#8963;"}},"AltLeft":{"en":{"key":"&#8997;","shiftKey":"&#8997;"},"ru":{"key":"&#8997;","shiftKey":"&#8997;"}},"MetaLeft":{"en":{"key":"&#8984;","shiftKey":"&#8984;"},"ru":{"key":"&#8984;","shiftKey":"&#8984;"}},"MetaRight":{"en":{"key":"&#8984;","shiftKey":"&#8984;"},"ru":{"key":"&#8984;","shiftKey":"&#8984;"}},"AltRight":{"en":{"key":"&#8997;","shiftKey":"&#8997;"},"ru":{"key":"&#8997;","shiftKey":"&#8997;"}},"ArrowLeft":{"en":{"key":"&#9668;","shiftKey":"&#9668;"},"ru":{"key":"&#9668;","shiftKey":"&#9668;"}},"ArrowUp":{"en":{"key":"&#9650;","shiftKey":"&#9650;"},"ru":{"key":"&#9650;","shiftKey":"&#9650;"}},"ArrowDown":{"en":{"key":"&#9660;","shiftKey":"&#9660;"},"ru":{"key":"&#9660;","shiftKey":"&#9660;"}},"ArrowRight":{"en":{"key":"&#9658;","shiftKey":"&#9658;"},"ru":{"key":"&#9658;","shiftKey":"&#9658;"}}},"letterKeys":{"KeyQ":{"en":{"key":"q","shiftKey":"Q","capsLock":"Q"},"ru":{"key":"й","shiftKey":"Й","capsLock":"Й"}},"KeyW":{"en":{"key":"w","shiftKey":"W","capsLock":"W"},"ru":{"key":"ц","shiftKey":"Ц","capsLock":"Ц"}},"KeyE":{"en":{"key":"e","shiftKey":"E","capsLock":"E"},"ru":{"key":"у","shiftKey":"У","capsLock":"У"}},"KeyR":{"en":{"key":"r","shiftKey":"R","capsLock":"R"},"ru":{"key":"к","shiftKey":"К","capsLock":"К"}},"KeyT":{"en":{"key":"t","shiftKey":"T","capsLock":"T"},"ru":{"key":"е","shiftKey":"Е","capsLock":"Е"}},"KeyY":{"en":{"key":"y","shiftKey":"Y","capsLock":"Y"},"ru":{"key":"н","shiftKey":"Н","capsLock":"Н"}},"KeyU":{"en":{"key":"u","shiftKey":"U","capsLock":"U"},"ru":{"key":"г","shiftKey":"Г","capsLock":"Г"}},"KeyI":{"en":{"key":"i","shiftKey":"I","capsLock":"I"},"ru":{"key":"ш","shiftKey":"Ш","capsLock":"Ш"}},"KeyO":{"en":{"key":"o","shiftKey":"O","capsLock":"O"},"ru":{"key":"щ","shiftKey":"Щ","capsLock":"Щ"}},"KeyP":{"en":{"key":"p","shiftKey":"P","capsLock":"P"},"ru":{"key":"з","shiftKey":"З","capsLock":"З"}},"BracketLeft":{"en":{"key":"[","shiftKey":"{"},"ru":{"key":"х","shiftKey":"Х","capsLock":"Х"}},"BracketRight":{"en":{"key":"]","shiftKey":"}"},"ru":{"key":"ъ","shiftKey":"Ъ","capsLock":"Ъ"}},"KeyA":{"en":{"key":"a","shiftKey":"A","capsLock":"A"},"ru":{"key":"ф","shiftKey":"Ф","capsLock":"Ф"}},"KeyS":{"en":{"key":"s","shiftKey":"S","capsLock":"S"},"ru":{"key":"ы","shiftKey":"Ы","capsLock":"Ы"}},"KeyD":{"en":{"key":"d","shiftKey":"D","capsLock":"D"},"ru":{"key":"в","shiftKey":"В","capsLock":"В"}},"KeyF":{"en":{"key":"f","shiftKey":"F","capsLock":"F"},"ru":{"key":"а","shiftKey":"А","capsLock":"А"}},"KeyG":{"en":{"key":"g","shiftKey":"G","capsLock":"G"},"ru":{"key":"п","shiftKey":"П","capsLock":"П"}},"KeyH":{"en":{"key":"h","shiftKey":"H","capsLock":"H"},"ru":{"key":"р","shiftKey":"Р","capsLock":"Р"}},"KeyJ":{"en":{"key":"j","shiftKey":"J","capsLock":"J"},"ru":{"key":"о","shiftKey":"О","capsLock":"О"}},"KeyK":{"en":{"key":"k","shiftKey":"K","capsLock":"K"},"ru":{"key":"л","shiftKey":"Л","capsLock":"Л"}},"KeyL":{"en":{"key":"l","shiftKey":"L","capsLock":"L"},"ru":{"key":"д","shiftKey":"Д","capsLock":"Д"}},"Semicolon":{"en":{"key":";","shiftKey":":"},"ru":{"key":"ж","shiftKey":"Ж","capsLock":"Ж"}},"Quote":{"en":{"key":"\'","shiftKey":"\\""},"ru":{"key":"э","shiftKey":"Э","capsLock":"Э"}},"Backslash":{"en":{"key":"\\\\","shiftKey":"|"},"ru":{"key":"ё","shiftKey":"Ё","capsLock":"Ё"}},"KeyZ":{"en":{"key":"z","shiftKey":"Z","capsLock":"Z"},"ru":{"key":"я","shiftKey":"Я","capsLock":"Я"}},"KeyX":{"en":{"key":"x","shiftKey":"X","capsLock":"X"},"ru":{"key":"ч","shiftKey":"Ч","capsLock":"Ч"}},"KeyC":{"en":{"key":"c","shiftKey":"C","capsLock":"C"},"ru":{"key":"с","shiftKey":"С","capsLock":"С"}},"KeyV":{"en":{"key":"v","shiftKey":"V","capsLock":"V"},"ru":{"key":"м","shiftKey":"М","capsLock":"М"}},"KeyB":{"en":{"key":"b","shiftKey":"B","capsLock":"B"},"ru":{"key":"и","shiftKey":"И","capsLock":"И"}},"KeyN":{"en":{"key":"n","shiftKey":"N","capsLock":"N"},"ru":{"key":"т","shiftKey":"Т","capsLock":"Т"}},"KeyM":{"en":{"key":"m","shiftKey":"M","capsLock":"M"},"ru":{"key":"ь","shiftKey":"Ь","capsLock":"Ь"}},"Comma":{"en":{"key":",","shiftKey":"<"},"ru":{"key":"б","shiftKey":"Б","capsLock":"Б"}},"Period":{"en":{"key":".","shiftKey":">"},"ru":{"key":"ю","shiftKey":"Ю","capsLock":"Ю"}}}}');function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}new(function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={capslock:!1,leftShift:!1,rightShift:!1,lang:localStorage.getItem("lang")?localStorage.getItem("lang"):"en"},this.mainElement=document.createElement("main"),e.append(this.mainElement),this.keyboardComponent=new h(m,this.state),this.outputComponent=new p(m),this.keyByCode=K(K(K(K({},m.symbolKeys),m.digitKeys),m.letterKeys),m.metaKeys),this.keyboardElement=this.keyboardComponent.element,this.mouseTarget=null}var n,s;return n=t,(s=[{key:"init",value:function(){var t=this;document.addEventListener("keydown",this.keydownHandler.bind(this)),document.addEventListener("keyup",this.keyupHandler.bind(this)),this.keyboardElement.addEventListener("mousedown",this.mousedownHandler.bind(this)),this.keyboardElement.addEventListener("mouseup",this.mouseupHandler.bind(this));var n=e('<div class="output"></div>');n.append(this.outputComponent.element),this.infoElement=e('\n<div class="info">\n  <div class="tumbler">\n    <ul class="tumbler__lines"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>\n    <div  class="tumbler__shadow"></div>\n    <div  class="tumbler__knob"></div>\n  </div>\n  <div class="info__text">\n    <p>Клавиатура создана и протестирована в операционной системе macOs.</p>\n    <p>\n      Для переключения языка используйте комбинацию клавиш:<br />\n      control + option (ctrl + alt на windows).\n    </p>\n  </div>\n  <div class="info__lang">\n  </div>\n</div>\n'),this.infoLangElement=this.infoElement.querySelector(".info__lang"),this.toggleInfoLang(),this.tumblerElement=this.infoElement.querySelector(".tumbler"),this.tumblerKnobElement=this.infoElement.querySelector(".tumbler__knob"),this.tumblerKnobElement.addEventListener("click",(function(){t.tumblerElement.classList.toggle("_active"),t.keyboardElement.classList.toggle("_colorful")})),this.mainElement.append(n),this.mainElement.append(this.keyboardComponent.element),this.mainElement.append(this.infoElement)}},{key:"toggleInfoLang",value:function(){this.infoLangElement.innerHTML="\n    <span>".concat(this.state.lang.toUpperCase(),"</span>\n    <span>").concat("en"===this.state.lang?"🇺🇸":"🇷🇺","</span>\n    ")}},{key:"mousedownHandler",value:function(e){e.preventDefault();var t=e.target.dataset.code;this.keyByCode[t]&&(this.mouseTarget=t,"CapsLock"===t?(this.state.capslock=!this.state.capslock,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleCapsLock()):"ShiftLeft"===t?(this.state.leftShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t&&(this.state.rightShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()),this.outputComponent.setState(this.state),this.outputComponent.update(t),this.keyboardComponent.toggleActiveClass(t,!0))}},{key:"mouseupHandler",value:function(e){e.preventDefault(),"ShiftLeft"===this.mouseTarget?this.state.leftShift=!1:"ShiftRight"===this.mouseTarget&&(this.state.rightShift=!1),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift(),this.keyboardComponent.toggleActiveClass("all",!1)}},{key:"keydownHandler",value:function(e){e.preventDefault();var t=e.code;this.keyByCode[t]&&("CapsLock"===t?(this.state.capslock=!this.state.capslock,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleCapsLock()):"ShiftLeft"===t?(this.state.leftShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t?(this.state.rightShift=!0,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):e.ctrlKey&&e.altKey&&(this.state.lang="en"===this.state.lang?"ru":"en",localStorage.setItem("lang",this.state.lang),this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleLang(),this.toggleInfoLang()),this.outputComponent.setState(this.state),this.outputComponent.update(t),this.keyboardComponent.toggleActiveClass(t,!0))}},{key:"keyupHandler",value:function(e){e.preventDefault();var t=e.code;this.keyByCode[t]&&("ShiftLeft"===t?(this.state.leftShift=!1,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()):"ShiftRight"===t&&(this.state.rightShift=!1,this.keyboardComponent.setState(this.state),this.keyboardComponent.toggleShift()),this.keyboardComponent.toggleActiveClass(t,!1))}}])&&v(n.prototype,s),Object.defineProperty(n,"prototype",{writable:!1}),t}())(document.body).init()})();